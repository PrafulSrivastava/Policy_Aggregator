# Story 7.6: Legal Disclaimers & Compliance

## Status
Draft

## Story
**As a** business owner,  
**I want** comprehensive legal disclaimers and compliance measures,  
**so that** I can protect the business from liability while providing AI-powered features.

## Acceptance Criteria

1. Legal disclaimer framework:
   - Comprehensive disclaimer for AI-generated content
   - "Information not advice" messaging
   - Liability limitations clearly stated
   - User acknowledgment required
2. Terms of Service updates:
   - Add AI features section
   - Disclaimers for AI-generated content
   - User responsibilities and limitations
   - Legal review completed
3. User agreement:
   - Users must acknowledge AI disclaimers
   - Checkbox: "I understand AI summaries are informational only"
   - Agreement stored with timestamp
4. Prominent disclaimers:
   - Disclaimers visible in emails (with AI summaries)
   - Disclaimers in dashboard (where AI content appears)
   - Disclaimers in API responses (if API includes AI features)
5. Impact assessment disclaimers:
   - Separate disclaimer for impact assessment
   - "Not legal advice" messaging
   - "Consult legal professional" recommendation
6. Privacy considerations:
   - Data handling for AI features (what data sent to OpenRouter)
   - User data privacy protection
   - Compliance with data protection regulations
7. Legal review:
   - Legal counsel review of all disclaimers
   - Terms of Service reviewed by lawyer
   - Liability protection measures in place
8. Documentation:
   - Legal disclaimer document
   - Terms of Service document
   - Privacy policy updates
9. User communication:
   - Email notification of Terms of Service updates
   - Clear explanation of changes
   - User must accept new terms to continue using AI features

## Tasks / Subtasks

- [ ] Task 1: Create legal disclaimer framework (AC: 1)
  - [ ] Draft comprehensive AI disclaimer:
    - [ ] "AI-generated content is informational only"
    - [ ] "Not legal advice"
    - [ ] "May contain errors"
    - [ ] "Consult legal professional for advice"
    - [ ] Liability limitations
  - [ ] Store disclaimer text in configuration or database
  - [ ] Make disclaimer text configurable
- [ ] Task 2: Create user agreement model (AC: 3)
  - [ ] Create Alembic migration for `user_agreements` table:
    - [ ] `id`: UUID (primary key)
    - [ ] `user_id`: UUID (foreign key to users)
    - [ ] `agreement_type`: VARCHAR(50) ('ai_features', 'terms_of_service')
    - [ ] `agreement_version`: VARCHAR(20) (version of agreement)
    - [ ] `accepted_at`: TIMESTAMP WITH TIME ZONE
    - [ ] `ip_address`: VARCHAR(45) (optional, for audit)
    - [ ] `created_at`: TIMESTAMP WITH TIME ZONE
  - [ ] Create SQLAlchemy model: `api/models/db/user_agreement.py`
  - [ ] Create repository: `api/repositories/user_agreement_repository.py`
- [ ] Task 3: Create user agreement UI (AC: 3)
  - [ ] Create `admin-ui/templates/pages/legal/ai-disclaimer.html` - AI disclaimer page
  - [ ] Create web route: `GET /legal/ai-disclaimer`
  - [ ] Display disclaimer:
    - [ ] Full disclaimer text
    - [ ] Checkbox: "I understand AI summaries are informational only"
    - [ ] Checkbox: "I understand this is not legal advice"
    - [ ] "Accept" button
  - [ ] Require acceptance before enabling AI features
- [ ] Task 4: Create user agreement API endpoints (AC: 3)
  - [ ] Create `GET /api/legal/ai-disclaimer` - Get disclaimer text
  - [ ] Create `POST /api/legal/ai-disclaimer/accept` - Accept disclaimer
  - [ ] Check if user has accepted disclaimer before allowing AI features
  - [ ] Store acceptance in database
  - [ ] Require authentication
- [ ] Task 5: Add disclaimers to email templates (AC: 4)
  - [ ] Update `admin-ui/templates/emails/change_alert.html`
  - [ ] Add disclaimer section when AI summary is included:
    - [ ] "AI-Generated Content Disclaimer"
    - [ ] Full disclaimer text or link to disclaimer page
    - [ ] Prominent placement (before or after summary)
  - [ ] Update plain text template as well
- [ ] Task 6: Add disclaimers to dashboard (AC: 4)
  - [ ] Update `admin-ui/templates/pages/dashboard.html`
  - [ ] Add disclaimer banner or section where AI content appears:
    - [ ] "AI-Generated Content" label
    - [ ] Brief disclaimer text
    - [ ] Link to full disclaimer
  - [ ] Add disclaimer to change detail page where AI summary appears
- [ ] Task 7: Add disclaimers to API responses (AC: 4)
  - [ ] Update API response schemas for AI features:
    - [ ] Add `ai_disclaimer` field to responses with AI content
    - [ ] Include disclaimer text or link
  - [ ] Update OpenAPI documentation
- [ ] Task 8: Create impact assessment disclaimers (AC: 5)
  - [ ] Draft separate disclaimer for impact assessment:
    - [ ] "Impact assessment is informational only"
    - [ ] "Not legal advice"
    - [ ] "Consult legal professional for advice"
  - [ ] Add disclaimer to impact assessment displays:
    - [ ] Email templates
    - [ ] Dashboard
    - [ ] Change detail page
- [ ] Task 9: Document privacy considerations (AC: 6)
  - [ ] Document what data is sent to OpenRouter:
    - [ ] Policy change diffs (text only)
    - [ ] User context (route, visa type, application stage)
    - [ ] No personally identifiable information (PII)
  - [ ] Update privacy policy:
    - [ ] AI features section
    - [ ] Data handling for AI features
    - [ ] Third-party service (OpenRouter) data sharing
  - [ ] Ensure compliance with GDPR, CCPA, etc.
- [ ] Task 10: Update Terms of Service (AC: 2)
  - [ ] Add AI features section to Terms of Service:
    - [ ] AI-generated content disclaimers
    - [ ] User responsibilities
    - [ ] Limitations of AI features
    - [ ] Liability limitations
  - [ ] Create `docs/legal/terms-of-service.md` or update existing
  - [ ] Version the Terms of Service
- [ ] Task 11: Create legal review process (AC: 7)
  - [ ] Prepare all legal documents for review:
    - [ ] AI disclaimer text
    - [ ] Terms of Service updates
    - [ ] Privacy policy updates
  - [ ] Submit to legal counsel for review
  - [ ] Incorporate legal feedback
  - [ ] Document legal review completion
- [ ] Task 12: Create user communication system (AC: 9)
  - [ ] Create email template for Terms of Service updates
  - [ ] Create notification system:
    - [ ] Email users when Terms of Service updated
    - [ ] Explain changes clearly
    - [ ] Require acceptance to continue using AI features
  - [ ] Create `POST /api/legal/terms/accept` endpoint
  - [ ] Block AI features until new terms accepted
- [ ] Task 13: Create legal documentation (AC: 8)
  - [ ] Create `docs/legal/ai-disclaimer.md` - Full AI disclaimer
  - [ ] Create or update `docs/legal/terms-of-service.md` - Terms of Service
  - [ ] Create or update `docs/legal/privacy-policy.md` - Privacy policy
  - [ ] Make documents accessible from admin UI
- [ ] Task 14: Add disclaimer enforcement (AC: 1, 3)
  - [ ] Update AI feature access checks:
    - [ ] Check if user has accepted AI disclaimer
    - [ ] Block AI features if not accepted
    - [ ] Redirect to disclaimer acceptance page
  - [ ] Update summarization service to check acceptance
  - [ ] Update impact assessment service to check acceptance

## Dev Notes

### Previous Story Insights
- Story 7.2 created AI summarization
- Story 7.3 created impact assessment
- Story 7.5 added AI summaries to emails
- Story 1.5 created User model

### Legal Considerations
**Critical Requirements:**
- All AI-generated content must have disclaimers
- Users must acknowledge disclaimers before using AI features
- Terms of Service must be legally reviewed
- Privacy policy must be updated

### File Locations
[Source: docs/architecture/unified-project-structure.md]

Files to create:
- `api/models/db/user_agreement.py` - User agreement model
- `api/repositories/user_agreement_repository.py` - Agreement repository
- `admin-ui/templates/pages/legal/ai-disclaimer.html` - Disclaimer page
- `docs/legal/ai-disclaimer.md` - Full disclaimer document
- `docs/legal/terms-of-service.md` - Terms of Service
- `docs/legal/privacy-policy.md` - Privacy policy
- `alembic/versions/XXX_add_user_agreements.py` - Migration

### Coding Standards
[Source: docs/architecture/coding-standards.md]

**Legal Compliance:**
- All disclaimers must be prominent and clear
- User acceptance must be tracked
- Legal documents must be versioned

### Testing Requirements
[Source: docs/architecture/testing-strategy.md]

**Legal Compliance Testing:**
- Verify all disclaimers present
- Verify user acceptance tracked
- Verify AI features blocked without acceptance

## Testing

**Legal Compliance Testing:**
- Verify all disclaimers present and visible
- Verify user acceptance required
- Verify AI features blocked without acceptance
- Verify Terms of Service acceptance works

**Manual Testing:**
- Accept AI disclaimer
- Use AI features
- Verify disclaimers visible in emails and dashboard
- Test Terms of Service update flow

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-27 | 1.0 | Initial story creation | Bob (Scrum Master) |



