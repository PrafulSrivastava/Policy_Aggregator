# Story 4.26: Cookie Consent Banner

## Status
Draft

## Story
**As a** user,  
**I want** to be informed about cookie usage and provide consent,  
**so that** I understand how my data is being used and comply with privacy regulations.

## Acceptance Criteria

1. Cookie consent banner appears on first visit (if consent not given)
2. Banner displays clear message about cookie usage
3. "Accept" button to consent to cookies
4. "Decline" or "Reject" button to decline non-essential cookies
5. "Learn More" link to cookie policy/privacy policy
6. Consent preference stored in localStorage
7. Banner does not reappear after consent is given
8. Banner can be dismissed (closes after selection)
9. Design system styling applied (Minimalist Monochrome)
10. Banner appears at bottom of viewport (fixed position)

## Tasks / Subtasks

- [ ] Task 1: Create cookie consent component (AC: 1, 2, 9, 10)
  - [ ] Create `src/components/CookieConsent.tsx`
  - [ ] Display cookie usage message
  - [ ] Position banner at bottom of viewport (fixed)
  - [ ] Apply design system styling
  - [ ] Make banner dismissible
- [ ] Task 2: Implement consent buttons (AC: 3, 4, 5)
  - [ ] Add "Accept" button (consents to all cookies)
  - [ ] Add "Decline" or "Reject" button (essential cookies only)
  - [ ] Add "Learn More" link to privacy/cookie policy
  - [ ] Style buttons according to design system
- [ ] Task 3: Implement consent storage (AC: 6, 7)
  - [ ] Create `src/services/cookies.ts` or use localStorage
  - [ ] Store consent preference in localStorage
  - [ ] Check localStorage on app load
  - [ ] Only show banner if consent not given
  - [ ] Store consent timestamp
- [ ] Task 4: Integrate with app (AC: 1, 8)
  - [ ] Add CookieConsent component to App.tsx
  - [ ] Show banner only if consent not given
  - [ ] Hide banner after user makes selection
  - [ ] Ensure banner doesn't block content
- [ ] Task 5: Create cookie policy page (AC: 5)
  - [ ] Create `src/pages/Legal/CookiePolicy.tsx`
  - [ ] Document cookie usage
  - [ ] Explain essential vs non-essential cookies
  - [ ] Add route: /#/legal/cookies
- [ ] Task 6: Create unit tests (AC: All)
  - [ ] Test cookie consent component
  - [ ] Test consent storage
  - [ ] Test banner visibility logic
  - [ ] Test button interactions
- [ ] Task 7: Manual testing (AC: All)
  - [ ] Test banner appearance on first visit
  - [ ] Test accept button
  - [ ] Test decline button
  - [ ] Test banner persistence after consent
  - [ ] Test "Learn More" link

## Dev Notes

### Previous Story Insights
- Story 4.17 created global UI enhancements
- App.tsx structure exists
- Design system established

### Design System
[Source: .ignore/design_prompt.md]

**Banner Styling:**
- Fixed position at bottom
- Sharp corners (no border-radius)
- Black border
- White background
- Black text
- Button styling: black background, white text

### File Locations
- `frontend/src/components/CookieConsent.tsx` - Cookie consent banner component
- `frontend/src/services/cookies.ts` - Cookie consent management service
- `frontend/src/pages/Legal/CookiePolicy.tsx` - Cookie policy page

### Technical Constraints
- Must comply with GDPR/CCPA requirements
- Must store consent in localStorage (or cookie)
- Must not block essential functionality
- Banner should be dismissible

## Testing

### Testing Standards
[Source: architecture/testing-strategy.md]

**Test File Location:** `frontend/src/__tests__/components/CookieConsent.test.tsx`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-27 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record
_To be populated by Dev Agent_

## QA Results
_To be populated by QA Agent_

